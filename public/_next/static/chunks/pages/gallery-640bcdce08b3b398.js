(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{4080:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gallery",function(){return n(44336)}])},44292:function(e,t,n){"use strict";var r=n(85893),l=n(28276),s=n(67294),o=n(11163),i=n(41664),a=n.n(i),u=n(40827),c=n(48966),d=n(25043),p=n(72806),h=n(21059),m=n(5434),f=n(2329),y=n(73242),b=n.n(y);let v=e=>{let{data:t,assetPage:n}=e,{t:i}=(0,l.$G)("gallery"),[y,v]=(0,s.useState)({}),[g,_]=(0,s.useState)(null),w=(0,s.useRef)(null),{width:C}=(0,p.Z)(w),j=(0,h.Z)(),x=(0,o.useRouter)();(0,s.useEffect)(()=>{if(j&&j.render&&0===Object.keys(y).length){for(let e of t)if(e.id===j.render){_(e);break}}},[j]);let O=async e=>{let t=JSON.parse(e.currentTarget.dataset.info);_(t),Object.keys(y).includes(t.id)||await fetch("/api/galleryClick",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id})}).then(e=>e.json()).then(e=>{console.log("Tracked click:",e)}),y[t.id]=!0,v(y),x.push({pathname:x.pathname,query:{...x.query,render:t.id}},void 0,{shallow:!0})};return(0,r.jsxs)("div",{className:b().wrapper,ref:w,children:[(0,r.jsxs)(u.Z,{breakpointCols:C<=590?1:Math.ceil(C/468),className:b().masonry,columnClassName:b().masonryColumn,children:[t.map((e,t)=>(0,r.jsx)("div",{className:b().thumbnail,"data-info":JSON.stringify(e),onClick:O,children:(0,r.jsx)(d.Z,{offset:500,children:(0,r.jsx)("img",{src:"https://cdn.polyhaven.com/gallery/".concat(e.file_name,"?width=").concat(460),alt:e.name})})},t)),!n&&(0,r.jsx)(a(),{href:"/gallery-submit",prefetch:!1,children:(0,r.jsxs)("div",{className:b().add,children:[(0,r.jsx)("strong",{children:"+"}),(0,r.jsx)("p",{children:i("submit.title")})]})})]}),g&&(0,r.jsxs)("div",{className:b().lightboxWrapper,onClick:e=>{"a"!==e.target.tagName.toLowerCase()&&(_(null),x.push({pathname:x.pathname,query:n?{id:x.query.id}:{}},void 0,{shallow:!0}))},children:[(0,r.jsxs)("div",{className:b().lightbox,children:[(0,r.jsxs)("div",{className:b().imageWrapper,children:[(0,r.jsx)(f.Z,{className:b().spinner}),(0,r.jsx)("img",{src:"https://cdn.polyhaven.com/gallery/".concat(g.file_name,"?width=").concat(C)})]}),(0,r.jsxs)("p",{children:[g.artwork_name&&(0,r.jsx)("em",{children:g.artwork_name}),i("by"),g.author_link&&(0,c.isURL)(g.author_link,{require_protocol:!0})?(0,r.jsx)("a",{target:"_blank",rel:"noopener",href:g.author_link,children:g.author}):(0,r.jsx)("span",{children:g.author}),i("using"),g.assets_used.slice(0,3).map((e,t)=>(0,r.jsx)(a(),{href:"/a/".concat(e),children:e},t)),g.assets_used.length>3?(0,r.jsx)("span",{title:g.assets_used.join(", "),children:"..."}):null]})]}),(0,r.jsx)(m.FU5,{})]})]})};v.defaultProps={assetPage:!1},t.Z=v},14443:function(e,t,n){"use strict";var r=n(85893),l=n(90661),s=n.n(l);let o=e=>{let{icon:t,label:n,onClick:l,active:o,children:i}=e;return(0,r.jsxs)("div",{className:s().wrapper,children:[(0,r.jsxs)("div",{className:"".concat(s().button," ").concat(o?s().active:""),onClick:l,children:[(0,r.jsx)("div",{className:s().icon,children:t}),n&&(0,r.jsx)("div",{className:s().label,children:n})]}),i?(0,r.jsx)("div",{className:s().menu,children:i}):null]})};o.defaultProps={label:null,active:!1,onClick:null,children:null},t.Z=o},72806:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(67294);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[n,l]=(0,r.useState)(0),[s,o]=(0,r.useState)(0);return(0,r.useEffect)(()=>{function t(){e&&e.current&&(e.current.offsetWidth!==n&&l(e.current.offsetWidth),e.current.offsetHeight!==s&&o(e.current.offsetHeight))}return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},t),{width:n,height:s}}},21059:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(11163);function l(){let e=(0,r.useRouter)(),t=/\[.+\]/.test(e.route)||/\?./.test(e.asPath),n=!t||Object.keys(e.query).length>0;return n?e.query:null}},44336:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return p},default:function(){return h}});var r=n(85893),l=n(28276),s=n(48155),o=n(41664),i=n.n(o),a=n(14443),u=n(28368),c=n(44292),d=n(5434),p=!0;function h(e){let{t}=(0,l.$G)(["common","gallery"]);return(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(s.Z,{title:t("gallery:title"),description:t("gallery:description"),url:"/gallery"}),(0,r.jsx)("h1",{style:{textAlign:"center",marginTop:"1.5em",marginBottom:0},children:t("gallery:title")}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"1em"},children:[(0,r.jsx)("p",{children:(0,r.jsx)("em",{children:t("gallery:description")})}),(0,r.jsx)(i(),{href:"/gallery-submit",prefetch:!1,children:(0,r.jsx)(a.Z,{icon:(0,r.jsx)(d.x06,{}),label:t("gallery:add")})})]}),(0,r.jsx)(c.Z,{data:e.data})]})}},73242:function(e){e.exports={wrapper:"Gallery_wrapper__jiLQS",render:"Gallery_render__hnL_k",masonry:"Gallery_masonry__SQVY_",masonryColumn:"Gallery_masonryColumn__v6nAS",thumbnail:"Gallery_thumbnail__yka2K",add:"Gallery_add__sm_sx",lightboxWrapper:"Gallery_lightboxWrapper__sooFT",lightbox:"Gallery_lightbox__s6MuL",imageWrapper:"Gallery_imageWrapper__Hbk9C",spinner:"Gallery_spinner__qXI6p"}},90661:function(e){e.exports={wrapper:"IconButton_wrapper__oOa2E",menu:"IconButton_menu__tNIWL",button:"IconButton_button__RSJAG",label:"IconButton_label__Mkq8x",active:"IconButton_active__Z5xiw",icon:"IconButton_icon__s11cP"}},40827:function(e,t,n){"use strict";var r=n(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}class i extends r.Component{constructor(e){let t;super(e),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this),t=this.props.breakpointCols&&this.props.breakpointCols.default?this.props.breakpointCols.default:parseInt(this.props.breakpointCols)||2,this.state={columnCount:t}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){let e=window&&window.innerWidth||1/0,t=this.props.breakpointCols;"object"!=typeof t&&(t={default:parseInt(t)||2});let n=1/0,r=t.default||2;for(let l in t){let s=parseInt(l),o=s>0&&e<=s;o&&s<n&&(n=s,r=t[l])}r=Math.max(1,parseInt(r)||1),this.state.columnCount!==r&&this.setState({columnCount:r})}itemsInColumns(){let e=this.state.columnCount,t=Array(e),n=r.Children.toArray(this.props.children);for(let r=0;r<n.length;r++){let l=r%e;t[l]||(t[l]=[]),t[l].push(n[r])}return t}renderColumns(){let{column:e,columnAttrs:t={},columnClassName:n}=this.props,s=this.itemsInColumns(),i=`${100/s.length}%`,a=n;a&&"string"!=typeof a&&(this.logDeprecated('The property "columnClassName" requires a string'),void 0===a&&(a="my-masonry-grid_column"));let u=o(o(o({},e),t),{},{style:o(o({},t.style),{},{width:i}),className:a});return s.map((e,t)=>r.createElement("div",l({},u,{key:t}),e))}logDeprecated(e){console.error("[Masonry]",e)}render(){let e=this.props,{children:t,breakpointCols:n,columnClassName:s,columnAttrs:o,column:i,className:a}=e,u=function(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,["children","breakpointCols","columnClassName","columnAttrs","column","className"]),c=a;return"string"!=typeof a&&(this.logDeprecated('The property "className" requires a string'),void 0===a&&(c="my-masonry-grid")),r.createElement("div",l({},u,{className:c}),this.renderColumns())}}i.defaultProps={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},t.Z=i},25043:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(67294),l=Object.defineProperty,s=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,o=(e,t,n)=>(s(e,"symbol"!=typeof t?t+"":t,n),n);let i=(e,t)=>"u">typeof getComputedStyle?getComputedStyle(e,null).getPropertyValue(t):e.style.getPropertyValue(t),a=e=>i(e,"overflow")+i(e,"overflow-y")+i(e,"overflow-x"),u=e=>{if(!(e instanceof HTMLElement))return window;let t=e;for(;t&&!(t===document.body||t===document.documentElement||!t.parentNode);){if(/(scroll|auto)/.test(a(t)))return t;t=t.parentNode}return window};class c extends r.Component{constructor(e){super(e),o(this,"elementObserver"),o(this,"wrapper"),o(this,"lazyLoadHandler",e=>{var t,n;let{onContentVisible:r}=this.props,[l]=e,{isIntersecting:s}=l;if(s){this.setState({visible:!0},()=>{r&&r()});let e=null==(t=this.wrapper)?void 0:t.current;e&&e instanceof HTMLElement&&(null==(n=this.elementObserver)||n.unobserve(e))}}),this.elementObserver=null,this.wrapper=r.createRef(),this.state={visible:!1}}componentDidMount(){var e;this.getEventNode();let{offset:t,threshold:n}=this.props,r={rootMargin:"number"==typeof t?`${t}px`:t||"0px",threshold:n||0};this.elementObserver=new IntersectionObserver(this.lazyLoadHandler,r);let l=null==(e=this.wrapper)?void 0:e.current;l instanceof HTMLElement&&this.elementObserver.observe(l)}shouldComponentUpdate(e,t){return t.visible}componentWillUnmount(){var e,t;let n=null==(e=this.wrapper)?void 0:e.current;n&&n instanceof HTMLElement&&(null==(t=this.elementObserver)||t.unobserve(n))}getEventNode(){var e;return u(null==(e=this.wrapper)?void 0:e.current)}render(){let{children:e,className:t,height:n,width:l,elementType:s}=this.props,{visible:o}=this.state,i=`LazyLoad${o?" is-visible":""}${t?` ${t}`:""}`;return(0,r.createElement)(s||"div",{className:i,style:{height:n,width:l},ref:this.wrapper},o&&r.Children.only(e))}}o(c,"defaultProps",{elementType:"div",className:"",offset:0,threshold:0,width:null,onContentVisible:null,height:null})}},function(e){e.O(0,[3415,9734,8966,2010,9774,2888,179],function(){return e(e.s=4080)}),_N_E=e.O()}]);